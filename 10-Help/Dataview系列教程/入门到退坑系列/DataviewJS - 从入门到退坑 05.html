<!DOCTYPE html>
<html><head>
			
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="description" content="Obsidian 在线发布系统，本网站内容通过Obsidian软件构建，联系QQ35669852"><title>Obsidian online</title>

		<link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png">
		<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
		

			<link rel="stylesheet" href="/Blue-topaz-example-online/asset/css/obsidian-styles.css">
			<link rel="stylesheet" href="/Blue-topaz-example-online/asset/css/plugin-styles.css">
			<link rel="stylesheet" href="/Blue-topaz-example-online/asset/css/theme.css">
			  <link rel="stylesheet" href="/Blue-topaz-example-online/asset/css/snippets.css"> <link href="/Blue-topaz-example-online/Index/pagefind-ui.css" rel="stylesheet" />
  <script src="/Blue-topaz-example-online/Index/pagefind-ui.js" type="text/javascript"></script>

			<style> body.css-settings-manager { --image-aspect-ratio: 3 / 4; --cards-width: 138px; --floating-toc-response-time: 0.3s; --background-blur-depth: 2px; --floating-toc-highlight-color: #FF8000; --floating-toc-highlight-color-rgb: 255,128,0; --focus-heading: 0.9; --floating-toc-position: 0px; --indicator-bar-position: 0em; --brightness-4-bg: 0.9; --saturate-4-bg: 1; --brightness-4-bg-cp: 0.9; --saturate-4-bg-cp: 1; --opacity-cp: 0.25; --text-highlight-bg-h-light: 34; --text-highlight-bg-s-light: 100%; --text-highlight-bg-l-light: 80%; --text-highlight-bg-a-light: 0.45; --font-family-h5: Bookerly, Merriweather, 'LXGW WenKai Mono', var(--default-font); --font-family-h6: Bookerly, Merriweather, 'LXGW WenKai Mono', var(--default-font); --font-size-vault-name: 0.95em; --paragraph-spacing: 1.3; --letter-space-main: 1; --line-height-split: 1; --fancy-hr-icon: '⚡'; --line-height-list: 1.4; --list-spacing-bt: 1; --list-indent: 2em; --list-ul-marker-size-1: 1.3em; --indentation-guide-width: 1.4px; --embed-content-height: 500px; --cloze-decoration-3: solid; --checkbox-size: 0.9rem; --loading-diy-text: "欢迎来到Blue Topaz 世界！𓃟𓃠𓃬𓃭𓃮𓃯𓃰𓃱𓃲𓃵𓃶𓄇𓄿𓅀𓅂𓅃𓅘𓅙𓅚𓅛𓅜𓅝𓅞𓅟𓅠𓅡𓅢𓅣𓅤𓅥𓅦𓅧𓅨𓅩𓅪𓅫𓅬𓅭"; --titlebar-blur-depth: 8px; --titlebar-brightness: 1; --blur-p-kanban-frosted-glass: 5; --blur-depth: 0px; --canvas-card-opacity: 0.1; --bg-panel-page-opacity-cp: 0.3; --background-markdown-page-theme-dark-custom: url("https://www.transparenttextures.com/patterns/batthern.png"); --background-markdown-page-theme-light-custom: url("https://www.transparenttextures.com/patterns/brick-wall.png"); --bg-markdown-page-opacity-cp: 0.25; --bottom-padding-value: 5em; } body.theme-light.css-settings-manager { --time-font-color: #FFFDFD; --time-color: #00792A; --magic-main-color: #34495E; --magic-low-color: #B3E2B3; --magic-deep-color: #3EAF7C; --background-waves-color: #5C87EC8C; --bg-color-notebook: #FFFFFF00; --background-leaf-resize-handle: #E9E9E900; --status-bar-bg: #FFFFFFBD; --hr-color-1: #73FF86; --hr-color-2: #268EE4; --hr-color-3: #BD30FF; --hr-color-4: #6EB4EE; --list-ul-marker-color: #9E8D3D; --indentation-guide-color: rgba(0,0,0,0.19); --indentation-guide-color-active: rgba(44,32,201,0.34); --cloze-decoration-color-3: #9F9B9B; --custom-titlebar-bg: #1BB08C00; } body.theme-dark.css-settings-manager { --time-color: #11765E; --magic-main-color: #D6870CBF; --magic-low-color: #425358; --magic-deep-color: #2D3435; --background-waves-color: #BDD1FFB3; --bg-color-notebook: #FFFFFF00; --grid-notebook-line-color-1: #FFFFFF08; --bg-color-highlight-1: #C8BD656F; --status-bar-bg: #FFFFFF03; --indentation-guide-color: rgba(182,182,182,0.45); --indentation-guide-color-active: rgba(255,255,255,0.84); --folder-colorful-custom-color: #E166FA; --background-code-2: #7C5A2200; --text-color-code: #CF820F; } </style>
			<style>  </style>

			<script src="/Blue-topaz-example-online/asset/js/webpage.js"></script>

			</head><body class="mod-windows is-frameless is-hidden-frameless obsidian-app theme-light show-view-header is-maximized css-settings-manager contextual-typography qe-title-center qe-hide-breadcrumbs color-scheme-options-simplicity-topaz disable-auto-hide-header background-settings-workplace-background-image background-settings-workplace-waves2-light background-settings-workplace-theme-dark-blue-gas background-image-settings-markdown-page-woof-meow background-image-settings-markdown-page-random-default notebook-liked-markdown-page-grid-notebook-1 toggle-split-note-background background-image-settings-command-palette-switch background-image-settings-command-palette-same-as-workplace panel-page-bg-theme-light-curve panel-page-bg-theme-dark-bulb hide-left-ribbon-retention-drawer layout-style-options-default bt-search-bar-bottom hover-scrollbars view-button-front toggle-divider-lines toggle-header-bottom-line clutter-free-headings funny-header-anim h1-text-align-center h2-text-align-start h3-text-align-start h4-text-align-start h5-text-align-start h6-text-align-start fancy-hr-icon colorful-unordered-list custom-unordered-list custom-ordered-list rainbow-lines-reading rainbow-checkbox file-bg-rounded-rectangle file-name-animation unmuted-collapsed-folder remove-arrow folder-style-change-options-colorful-title folder-colorful-two blockquote-style-quotation-mark hr-for-pagination show-url-after-link adjustable-embed-content-height hide-embed-title hide-embed-banner embed-hover remove-table-transition default-table table-style-default link-underline-external link-click circular-checkbox loading-custom-text loading-text-typing-style tag-click head-tag-style rainbow-tag setting-default-frosted-glass default-titlebar hide-titlebar-text hide-titlebar-close-btn logseq-outline-style stack-tab-text-ori-mixed default-tab canvas-card-focus-mode canvas-card-text-middle toggle-canvas-grid default-canvas-background traditional-callout-style style-options-for-admonition-plugin toggle-calendar-shadow toggle-calendar-transparent style-options-for-calendar-plugin-style-one rainbow-checklist style-options-for-kanban-plugin-static-plain style-options-for-kanban-plugin-dynamic-neon-three style-options-for-buttons-plugin dataview-list-style-pacman default-dvtable dialogue-style-wechat memos-inputbox memos-default-light ice-dark quiet-outline-optimize colorful-p-kanban code-theme-bt-default code-line-number whole-code-wrap codebox-default-style AT-row table-height-adjust obsidian-themepocalypse enable-heading-nowrap float-curves-outline-style enable-bar-icon enable-background-blur-dept is-focused" style="--zoom-factor:1; --font-text-size:14px; --cmdr-spacing:8px; --at-button-height:48px; --at-button-width:48px; --at-row-count:1; --at-spacing:0px; --at-offset:0px;"><div class="flex-container"><div id="sidebar" class="sidebar-left"><div><label class="theme-toggle" for="theme_toggle"><input class="toggle__input" type="checkbox" id="theme_toggle"><div class="toggle__fill"></div></label></div></div><div class="markdown-reading-view" style="flex-basis: 9999px; height: 100%; width: unset;"><div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-frontmatter" style="tab-size: 4;" tabindex="-1"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom: 375px; min-height: 5793px;"><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="mod-header"><div class="inline-title" contenteditable="true" spellcheck="false" tabindex="-1" enterkeyhint="done">DataviewJS - 从入门到退坑 05</div></div><div data-tag-name="pre" class="el-pre code-block-wrap"><pre class="frontmatter code-block-pre__has-linenum language-yaml" style="display: none; position: relative !important; padding-top: 35px !important;" tabindex="0"><pre class="obsidian-embedded-code-title__code-block-title"><div class="collapser"><div class="handle"></div></div><div class="title"></div><div class="langName">Yaml</div></pre><code class="language-yaml is-loaded"><span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token string">"https://publish.obsidian.md/napkinium/Ideas/Dataview/Learnings/Dataview+Learnings"</span></code><span class="code-block-linenum-wrap" style="top: 35px; border-right: 1px solid currentcolor;"><span class="code-block-linenum" style="height: 0px;"></span></span><button class="copy-code-button">复制</button></pre><div class="frontmatter-container"><div class="frontmatter-container-header"><div class="frontmatter-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Metadata</div><div class="frontmatter-section"><span class="frontmatter-section-label">source</span><div class="frontmatter-section-data"><span class="frontmatter-section-data-item">https://publish.obsidian.md/napkinium/Ideas/Dataview/Learnings/Dataview+Learnings</span></div></div></div></div><div data-block-language="chat" class="el-lang-chat el-div" data-tag-name="div"><div class="block-language-chat"><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">首先——</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">为啥你明明是“答”却先开口了啊！</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">好好好。你来。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">咳咳。呐，上次的作业，答案给一下。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">（尖锐）你做了么，就要答案。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">呃，做了的，只是……对一下答案。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">……喏。<br><code>dv.list(dv.pages('"Test"').sort(p =&gt; p.file.mtime).file.mtime);</code><br><code>dv.list(dv.pages('"Test"').sort(p =&gt; p.file.name.length).file.name;</code></p></div><div class="chat-view-bubble chat-view-align-right chat-view-small-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message"><code>function timeFromInDays(p) { return Math.abs(luxon.Interval.fromDateTimes( p.file.ctime,luxon.DateTime.fromISO("2021-08-15")).length("days"));}</code><br><code>dv.list(dv.pages('"Test"').sort(timeFromInDays, 'asc').file.cday);</code></p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">你这个最后一个也太坑了吧，谁会有这么奇葩的需求啊？</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">你不是也从来没有在一个笼子里养过鸡和兔子。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">那也……确实。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">而且是要多那啥才会分不清鸡和兔子的脚和头啊。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">我觉得问题不是分辨哪只是鸡，哪只是兔子，而是数的时候两边都在不停地动，容易数乱。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-small-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">anyway。今天讲什么呢，我觉得虽然学了些很复杂的东西，但是还是不太懂怎么组合在一起。而且，只是单纯地列出文件名字之类的，有些无聊。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">你想做点什么？</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">我想想哦……DV里面很容易就能做出一个很多列的很多信息的表格，DVJS还没有讲过怎么弄。就比如我的书单，dv里面是这样的：</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">嗯，所以是从给定的文件夹里，列出文件名，评分，作者和阅读情况，然后优先按照得分排序，再次按照状态排序<a href="https://publish.obsidian.md/#fn-1-67c9762c6b2546d2">[1]</a>，是嘛。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">嗯。然后，我现在有这么两个问题。首先是，我想把这个书单改成“近期书单”，所以希望把创建日期比较久远的文件筛掉。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">嗯。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">然后，状态排序因为是“读过”，“在读”，“未读”的文字，我想不按拼音顺序，而按照我自己指定的顺序排列。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">好，那你小本本拿好了，我们接下来要开复杂一点的内容了。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">呃……先讲简单的吧，不管那些新要求，先列表，难么？</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">没那么难。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">我看看哦……所以首先，这个<code>dv.table</code>就是拿来列表的咯？</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">是的。接受的两个参数，第一个就是表头，第二个则是剩下的列数据。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">表头比起原生DV多了一个<code>File</code>。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">原生DV默认会提供给你链接形式的文件名，这里我们手动提供了。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">表头这个我懂了，然后后面这个比较长，我得拆开来看。首先是……<code>dv.pages('"Books"')</code>，也就是从这个文件夹里读取页面，嗯这个我熟悉。然后……比想象的简单诶，就是连续两个<code>sort</code>。<code>sort</code>可以这么串联的嘛？</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">正确，<code>sort</code>和<code>filter</code>都是可以任意串联的，两者都会即时对数据进行变形。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">之后我就看不懂了。这个<code>map</code>……地图？是干啥的？我听人说好像词典什么的就是这个？</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">编程里常见的Map其实是个多义词，但是追根究底又不是。你说的词典、哈希表都是作为数据结构的Map，用词典来理解很妥当：你要找某个词的意思，就按照索引，直接翻到词典里的某页去读定义。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">没听懂。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">就是个你给他一个东西，它就能返给你对应的一个东西的东西。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">更乱了。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">“螃蟹多少钱一斤？5毛。鳄鱼多少钱一斤？8毛。”</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">两个例子都有微妙的坐牢要素，不过我大概明白了，就是问答一一对应呗。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">……你早说你知道一一对应就不用我这么浪费时间了。Map是用来存储一一对应的数据结构，而作为动词/函数的<code>map</code>，则指的是“根据某种规则一个一个地变动”。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">再拿螃蟹举个栗子吧，这个我觉得挺亲切的，虽然有点馋了。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">假如有一筐螃蟹<code>crabs</code>，那么<code>crabs.map(crab =&gt; crab.legs)</code>就是我每给你一个螃蟹，你就把螃蟹腿给拆下来递回去。最后所有这些螃蟹腿排好，就是了。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">没这么卖螃蟹的。不过懂了，那如果我只是每个螃蟹要过一下秤，然后拿一个重量清单，那就是<code>crabs.map(crab =&gt; crab.weight)</code>咯。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">孺子可教也。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">匹夫不可夺志也。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-small-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">所以这里，这个map就是说，每给我一个page——也就是一本书的笔记——我就返回一个Array，里面分别是书的文件链接，我给的得分，书的作者，还有阅读状态，然后所有这些array放一起，这个array的array，就是第二个参数咯？</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">诶，我还没解释Array呢，你就会了？</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">就一列东西嘛。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">array的array你也掌握了我是没想到的。</p></div><div class="chat-view-bubble chat-view-align-left chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">我也是会独立学习的哼唧。嘛，这个内容还是有点多，我先消化消化，更复杂的东西下次再说。</p></div><div class="chat-view-bubble chat-view-align-right chat-view-default-vertical-margin chat-view-undefined chat-view-desktop-width chat-view-bubble-mode-default"><p class="chat-view-message">好。</p></div></div></div><div data-tag-name="hr" class="el-hr"><hr></div></div></div></div><div id="sidebar" class="sidebar-right"><div></div></div></div></body></html>